# This files contains everything needed to run this stack in development, staging, or production

version: '3.4'

services:
  bot:
    image: paulrichter/utopia_war_summary:2.0
    # restart: unless-stopped
    networks:
      - camelot_glory_wall
    environment:
      - SLACK_TOKEN=${SLACK_TOKEN}
      - SLACK_USERNAME=${SLACK_USERNAME}
      - UTOPIA_AGE=78
    stdin_open: true
    tty: true
    command: "python summary.py"
  pgweb:
    restart: unless-stopped
    image: sosedoff/pgweb
    networks:
      - camelot_glory_wall
    ports:
      - "8081:8081"
    environment:
      - DATABASE_URL=postgres://camelot:camelot@camelot_db_1:5432/camelot?sslmode=disable
      # - POSTGRES_PASSWORD=camelot

networks:
  camelot_glory_wall:
    external: true
